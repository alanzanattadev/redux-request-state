{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4e90966bdbccd84dc306","webpack:///external {\"root\":\"immutable\",\"commonjs2\":\"immutable\",\"commonjs\":\"immutable\",\"amd\":\"immutable\"}","webpack:///./lib/Route.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///./lib/hoc.js","webpack:///./lib/middleware.js","webpack:///./lib/react.js","webpack:///./lib/reducer.js","webpack:///./lib/types.js","webpack:///./lib/selectors.js","webpack:///external {\"root\":\"prop-types\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack:///external {\"root\":\"recompose\",\"commonjs2\":\"recompose\",\"commonjs\":\"recompose\",\"amd\":\"recompose\"}","webpack:///./lib/index.js"],"names":["Route","type","resolve","Promise","replayWith","requestIDFactory","Error","params","resolved","requestID","resolver","Object","assign","create","RequestStateConnecter","RenderedStateConnecter","RoutesProvider","LT_routes","any","props","routes","children","WithRoutes","Comp","mapPropsToRequestID","RequestStateHOC","WrappedComponent","RequestStateContainer","undefined","requests","Component","mapStateToComponent","useCache","useFallback","component","details","state","module","exports","middleware","config","action","next","pendingAction","payload","store","dispatch","returnedValue","then","successAction","data","result","toReplay","Array","isArray","forEach","a","errorAction","error","convertMapStateToComponentOptionToFunc","convertMapRequestIDToPropsOptionToFunc","mapRequestIDToProps","reqID","fallbackToDefault","cached","createClass","propTypes","reducer","PropTypes","object","isRequired","render","mapStateToComponentFunc","mapRequestIDToPropsFunc","reqState","getIn","split","get","cloneElement","require","fromJS","setIn","toJS","STATUS_SUCCESS","STATUS_ERROR","STATUS_PENDING","STATUS_DEFAULT","STATUS_CACHE","getStateOfRequestID","getDetailsOfRequestID","getRequestOfRequestID","request","default"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"react\"), require(\"prop-types\"), require(\"recompose\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\", \"react\", \"prop-types\", \"recompose\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxRequestState\"] = factory(require(\"immutable\"), require(\"react\"), require(\"prop-types\"), require(\"recompose\"));\n\telse\n\t\troot[\"ReduxRequestState\"] = factory(root[\"immutable\"], root[\"React\"], root[\"prop-types\"], root[\"recompose\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4e90966bdbccd84dc306","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"immutable\",\"commonjs2\":\"immutable\",\"commonjs\":\"immutable\",\"amd\":\"immutable\"}\n// module id = 0\n// module chunks = 0","\"use babel\";\r\n// @flow\r\n\r\nimport type { ResolveResult } from \"./types.js\";\r\nimport type { ResolveFn } from \"./types.js\";\r\nimport type { ReplayWithFn } from \"./types.js\";\r\nimport type { RequestIDFactory } from \"./types.js\";\r\nimport type { RequestAction } from \"./types.js\";\r\n\r\nexport default class Route {\r\n  type: string;\r\n  resolve: ResolveFn;\r\n  replayWith: ?ReplayWithFn;\r\n  requestIDFactory: RequestIDFactory;\r\n  constructor(\r\n    {\r\n      type = \"REQUEST\",\r\n      resolve = () => Promise.resolve(null),\r\n      replayWith = null,\r\n      requestIDFactory,\r\n    }: {\r\n      type: string,\r\n      resolve: ResolveFn,\r\n      replayWith: ?ReplayWithFn,\r\n      requestIDFactory: RequestIDFactory,\r\n    } = {},\r\n  ) {\r\n    if (typeof requestIDFactory !== \"function\")\r\n      throw new Error(\r\n        \"You have to define a requestIDFactory attribut to the Route constructor: (...params) => string\",\r\n      );\r\n    this.type = type;\r\n    this.resolve = resolve;\r\n    this.replayWith = replayWith;\r\n    this.requestIDFactory = requestIDFactory;\r\n  }\r\n\r\n  getRequestID(...params: Array<any>): string {\r\n    return this.requestIDFactory(...params);\r\n  }\r\n\r\n  create(...params: Array<any>): RequestAction {\r\n    return {\r\n      type: this.type,\r\n      resolve: () => this.resolve(...params),\r\n      replayWith: this.replayWith ? (resolved: any) => this.replayWith(resolved, ...params) : null,\r\n      requestID: this.requestIDFactory(...params),\r\n    };\r\n  }\r\n\r\n  createAndInject(resolver: ResolveResult, ...params: Array<any>): RequestAction {\r\n    return Object.assign({}, this.create(...params), {\r\n      resolve: () => resolver,\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/Route.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 2\n// module chunks = 0","\"use babel\";\r\n// @flow\r\n\r\nimport React from \"react\";\r\nimport { withContext, getContext, renameProp } from \"recompose\";\r\nimport Types from \"prop-types\";\r\nimport { getStateOfRequestID, getDetailsOfRequestID } from \"./selectors\";\r\nimport type { Routes } from './types';\r\n\r\nexport const RoutesProvider: (\r\n  component: React$Component,\r\n) => React$Component = withContext(\r\n  {\r\n    LT_routes: Types.any,\r\n  },\r\n  props => ({\r\n    LT_routes: props.routes,\r\n  }),\r\n)(({ children }) => children);\r\n\r\nexport const WithRoutes = Comp =>\r\n  getContext({\r\n    LT_routes: Types.any,\r\n  })(renameProp(\"LT_routes\", \"routes\")(Comp));\r\n\r\nexport function RequestStateConnecter(\r\n  mapPropsToRequestID: (props: any, routes: {[key: string]: Route}) => string,\r\n) {\r\n  return function RequestStateHOC(WrappedComponent) {\r\n    class RequestStateContainer extends React.Component {\r\n      constructor(props) {\r\n        super(props);\r\n\r\n        if (props.routes === undefined)\r\n          throw new Error(\r\n            \"RequestStateConnecter must receive routes from RoutesProvider, you may have forgotten to declare the RoutesProvider\"\r\n          );\r\n      }\r\n\r\n      render() {\r\n        if (!this.props.requests)\r\n          throw new Error(\r\n            \"RequestStateConnecter must get the reducer requests as props\",\r\n          );\r\n        return (\r\n          <WrappedComponent\r\n            {...this.props}\r\n            state={getStateOfRequestID(\r\n              this.props.requests,\r\n              mapPropsToRequestID(this.props, this.props.routes),\r\n            )}\r\n            details={getDetailsOfRequestID(\r\n              this.props.requests,\r\n              mapPropsToRequestID(this.props, this.props.routes),\r\n            )}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return WithRoutes(RequestStateContainer);\r\n  };\r\n}\r\n\r\nexport function RenderedStateConnecter(\r\n  mapStateToComponent: (\r\n    state: string,\r\n    props: any,\r\n    details: any,\r\n  ) => React.Element<any>,\r\n  useCache: (props: any, state: string) => boolean | boolean = false,\r\n  useFallback: boolean = true,\r\n) {\r\n  return class RequestStateDependant extends React.Component {\r\n    render() {\r\n      let component;\r\n      if (\r\n        mapStateToComponent(\"CACHE\", this.props, this.props.details) &&\r\n        (typeof useCache == \"boolean\"\r\n          ? useCache\r\n          : useCache(this.props, this.props.state))\r\n      )\r\n        component = mapStateToComponent(\r\n          \"CACHE\",\r\n          this.props,\r\n          this.props.details,\r\n        );\r\n      else\r\n        component = mapStateToComponent(\r\n          this.props.state,\r\n          this.props,\r\n          this.props.details,\r\n        );\r\n      if (component == null && useFallback)\r\n        component = mapStateToComponent(\r\n          \"DEFAULT\",\r\n          this.props,\r\n          this.props.details,\r\n        );\r\n      return component || null;\r\n    }\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/hoc.js","\"use strict\";\r\n\"use babel\";\r\n// @flow weak\r\n\r\nimport type {\r\n  PendingRequestAction,\r\n  ErrorRequestAction,\r\n  SuccessRequestAction,\r\n} from \"./types\";\r\n\r\nmodule.exports = function middleware(config) {\r\n  return store => next => action => {\r\n    if (typeof action !== \"object\") return next(action);\r\n    else if (\r\n      !(typeof action.requestID == \"string\" &&\r\n        typeof action.resolve == \"function\")\r\n    )\r\n      return next(action);\r\n    else {\r\n      let pendingAction: PendingRequestAction = {\r\n        type: \"REQUEST_STATE_CHANGED\",\r\n        payload: {\r\n          requestID: action.requestID,\r\n          state: \"PENDING\",\r\n          params: action.payload,\r\n        },\r\n      };\r\n      store.dispatch(pendingAction);\r\n      let returnedValue = action.resolve();\r\n      if (\r\n        typeof returnedValue === \"undefined\" ||\r\n        typeof returnedValue.then !== \"function\"\r\n      )\r\n        throw new Error(\"Resolve must return a Promise\");\r\n      else {\r\n        return returnedValue.then(\r\n          result => {\r\n            let successAction: SuccessRequestAction = {\r\n              type: \"REQUEST_STATE_CHANGED\",\r\n              payload: {\r\n                requestID: action.requestID,\r\n                state: \"SUCCESS\",\r\n                params: action.payload,\r\n                data: result,\r\n              },\r\n            };\r\n            store.dispatch(successAction);\r\n            if (typeof action.replayWith == \"function\") {\r\n              let toReplay = action.replayWith(result);\r\n              if (Array.isArray(toReplay)) {\r\n                toReplay.forEach(a => store.dispatch(a));\r\n              } else {\r\n                store.dispatch(toReplay);\r\n              }\r\n            }\r\n          },\r\n          error => {\r\n            let errorAction: ErrorRequestAction = {\r\n              type: \"REQUEST_STATE_CHANGED\",\r\n              payload: {\r\n                requestID: action.requestID,\r\n                state: \"ERROR\",\r\n                params: action.payload,\r\n                error,\r\n              },\r\n            };\r\n            store.dispatch(errorAction);\r\n          },\r\n        );\r\n      }\r\n    }\r\n  };\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/middleware.js","'use strict'\r\n'use babel'\r\n// @flow\r\n\r\nimport React from 'react';\r\nimport {fromJS} from 'immutable';\r\n\r\nfunction convertMapStateToComponentOptionToFunc(mapStateToComponent) {\r\n  if (typeof mapStateToComponent == 'function')\r\n    return mapStateToComponent;\r\n  else if (typeof mapStateToComponent == 'object')\r\n    return (state, props) => mapStateToComponent[state];\r\n  else\r\n    throw new Error('mapStateToComponent must be a function or an object');\r\n}\r\n\r\nfunction convertMapRequestIDToPropsOptionToFunc(mapRequestIDToProps) {\r\n  if (typeof mapRequestIDToProps == 'function')\r\n    return mapRequestIDToProps;\r\n  else if (typeof mapRequestIDToProps == 'object')\r\n    return (reqID) => mapRequestIDToProps[reqID];\r\n  else if (typeof mapRequestIDToProps == 'undefined')\r\n    return (reqID) => undefined;\r\n  else\r\n    throw new Error('mapRequestIDToProps must be a function or an object');\r\n}\r\n\r\nexport default (\r\n  requestID: string,\r\n  {mapStateToComponent, mapRequestIDToProps, useCache}: any = {},\r\n  {fallbackToDefault, cached}: {fallbackToDefault: boolean, cached?: boolean} = {fallbackToDefault: true, cached: false}\r\n) => (\r\n  React.createClass({\r\n    propTypes: {\r\n      reducer: React.PropTypes.object.isRequired\r\n    },\r\n    render: function() {\r\n      let mapStateToComponentFunc = convertMapStateToComponentOptionToFunc(mapStateToComponent);\r\n      let mapRequestIDToPropsFunc = convertMapRequestIDToPropsOptionToFunc(mapRequestIDToProps);\r\n      useCache = useCache || function() {return false};\r\n      let reqState = fromJS(this.props.reducer).getIn(requestID.split('.'), fromJS({})).get('state', 'DEFAULT');\r\n      let props = Object.assign({}, this.props, mapRequestIDToPropsFunc(requestID));\r\n      let component;\r\n      if (mapStateToComponentFunc(\"CACHE\", props) && useCache(this.props, reqState))\r\n        component = mapStateToComponentFunc(\"CACHE\", props);\r\n      else\r\n        component = mapStateToComponentFunc(reqState, props);\r\n      if (component == null && fallbackToDefault)\r\n        component = mapStateToComponentFunc('DEFAULT', props);\r\n      return component != null ? React.cloneElement(component, props) : null;\r\n    },\r\n  })\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/react.js","\"use strict\";\r\n\"use babel\";\r\n// @flow weak\r\n\r\nvar { fromJS } = require(\"immutable\");\r\n\r\nmodule.exports = function reducer(state = {}, action) {\r\n  switch (action.type) {\r\n    case \"REQUEST_STATE_CHANGED\":\r\n      return fromJS(state)\r\n        .setIn(action.payload.requestID.split(\".\"), {\r\n          state: action.payload.state,\r\n          error: action.payload.error,\r\n          params: action.payload.params,\r\n          data: action.payload.data,\r\n        })\r\n        .toJS();\r\n      break;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/reducer.js","\"use babel\";\r\n// @flow weak\r\n\r\nexport type RequestID = string;\r\nexport type ResolveResult = Promise<any>;\r\nexport type ResolveFn = (...params: Array<any>) => ResolveResult;\r\nexport type ReplayWithFn = (response: any, ...params: Array<any>) => { type: string };\r\nexport type RequestIDFactory = (...params: Array<any>) => string;\r\nexport type RequestAction = {\r\n  type: string,\r\n  resolve: () => ResolveResult,\r\n  replayWith: ?ReplayWithFn,\r\n  requestID: string,\r\n};\r\n\r\nexport const STATUS_SUCCESS = \"SUCCESS\";\r\nexport const STATUS_ERROR = \"ERROR\";\r\nexport const STATUS_PENDING = \"PENDING\";\r\nexport const STATUS_DEFAULT = \"DEFAULT\";\r\nexport const STATUS_CACHE = \"CACHE\";\r\n\r\nimport Route from './Route';\r\nexport type Routes = {[key: string]: Routes | Route};\r\n\r\nexport type PendingRequestAction = {\r\n  type: string,\r\n  payload: {\r\n    requestID: RequestID,\r\n    state: string,\r\n  },\r\n};\r\n\r\nexport type SuccessRequestAction = {\r\n  type: string,\r\n  payload: {\r\n    requestID: RequestID,\r\n    state: string,\r\n  },\r\n};\r\n\r\nexport type ErrorRequestAction = {\r\n  type: string,\r\n  payload: {\r\n    requestID: RequestID,\r\n    state: string,\r\n    error: any,\r\n  },\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types.js","\"use babel\";\r\n// @flow\r\n\r\nimport { fromJS } from \"immutable\";\r\n\r\nexport function getStateOfRequestID(reducer: any, requestID: string): string {\r\n  return fromJS(getRequestOfRequestID(reducer, requestID)).get(\r\n    \"state\",\r\n    \"DEFAULT\",\r\n  );\r\n}\r\n\r\nexport function getDetailsOfRequestID(reducer: any, requestID: string): ?any {\r\n  let request = getRequestOfRequestID(reducer, requestID);\r\n  if (request.state == \"SUCCESS\") return request.data;\r\n  else if (request.state == \"ERROR\") return request.error;\r\n  else return null;\r\n}\r\n\r\nexport function getRequestOfRequestID(reducer: any, requestID: string): any {\r\n  return fromJS(reducer).getIn(requestID.split(\".\"), fromJS({})).toJS();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/selectors.js","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"prop-types\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}\n// module id = 9\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"recompose\",\"commonjs2\":\"recompose\",\"commonjs\":\"recompose\",\"amd\":\"recompose\"}\n// module id = 10\n// module chunks = 0","export { default as RequestStateComponentFactory } from \"./react\";\r\nexport { default as RequestStateMiddleware } from \"./middleware\";\r\nexport { default as RequestStateReducer } from \"./reducer\";\r\nexport {\r\n  RequestStateConnecter,\r\n  RenderedStateConnecter,\r\n  RoutesProvider,\r\n  WithRoutes,\r\n} from \"./hoc\";\r\nexport { default as Route } from \"./Route\";\r\nexport {\r\n  STATUS_ERROR,\r\n  STATUS_PENDING,\r\n  STATUS_SUCCESS,\r\n  STATUS_DEFAULT,\r\n  STATUS_CACHE,\r\n} from \"./types\";\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js"],"sourceRoot":""}